<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>A Pelican Blog - tutorial]</title>
        <link rel="stylesheet" href="/theme/css/main.css" />
        <link href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="A Pelican Blog Atom Feed" />

        <!--[if IE]>
            <script src="https://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">A Pelican Blog </a></h1>
                <nav><ul>
                    <li><a href="/category/blog.html">blog</a></li>
                    <li><a href="/category/longform.html">longform</a></li>
                </ul></nav>
        </header><!-- /#banner -->

            <aside id="featured" class="body">
                <article>
                    <h1 class="entry-title"><a href="/simpsons-paradox-backwards.html">Simpson's Paradox backwards</a></h1>
<footer class="post-info">
        <abbr class="published" title="2016-02-13T00:00:00+00:00">
                Published: Sat 13 February 2016
        </abbr>

<p>In <a href="/category/blog.html">blog</a>.</p>
<p>tags: <a href="/tag/statistics.html">[statistics</a> <a href="/tag/tutorial.html">tutorial]</a> </p>
</footer><!-- /.post-info --><hr>
<p>I have been enjoying reading Judea Pearl's new book <em>Causal Inference in Statistics: A primer</em><sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup></p>
<p>Following on from their example, consider trying to choose between two doctors. You automatically choose the one with the best outcomes. But suppose the one with the best outcomes chooses the easiest cases. The other's poorer record is a consequence of trickier work. Now who do you choose? Better to look at the results stratified by difficulty and then decide.</p>
<p>There is another side to the coin however which says that the stratified outcomes would lead you to the wrong choice. This time consider choosing to use a drug or not. The drug has a toxic side effect, but its therapeutic mechanism of action is through lowering blood pressure. Overall, the drug improves outcomes in the population, but when stratifying on <em>post-treatment</em> blood pressure the outcomes are worse in both the low and the high blood pressure groups. How can this be true? Because we have unintentionally stratified on the outcome, and within each outcome all that remains to observe is the toxic side effect.</p>
<p>To clarify, imagine the drug is designed to fix broken hearts, and it does this by lowering the blood pressure, and instead of stratifying on blood pressure we stratify on fixed hearts. When the drug works, the heart is fixed (and the blood pressure will be lower), but some of the patients will also get the toxic side effect. Because the drug works, the 'fixed heart' group will have more patients who have taken the drug, than there are patients taking the drug in the 'broken' heart group. More patients taking the drug means more patients getting side effects, and apparently (but falsely) better outcomes for patients who didn't take the drug.</p>
<p>The patients who get better without taking the drug are just lucky. The patients who took the drug and got better are a mixture of those who needed the drug to get better, and those who would have been lucky anyway. Examining only patients with 'fixed hearts' means excluding patients who <em>would have</em> been fixed had they taken the drug. Excluding such patients means excluding the harm from <em>not taking</em> the drug which in turn means we only see the harm from <em>taking</em> the drug. </p>
<p>Simpson's paradox arises when there is a cause  for the outcome other than the treatment such as the fact that your doctor only does tricky cases. Controlling for the common cause (tricky versus easy cases) allows us to see the true effect. In the latter example, we have unintentionally stratified on an outcome not on a cause which means the true answer is in the aggregate not the stratified data.</p>
<div class="footnote">
<hr>
<ol>
<li id="fn-1">
<p>Pearl J. Causal Inference in Statistics. John Wiley &amp; Sons; 2016&#160;<a class="footnote-backref" href="#fnref-1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
</ol>
</div>                </article>
            </aside><!-- /#featured -->
                <section id="content" class="body">
                    <h1>Other articles</h1>
                    <hr />
                    <ol id="posts-list" class="hfeed">

            <li><article class="hentry">
                <header>
                    <h1><a href="/getting-data-into-r.html" rel="bookmark"
                           title="Permalink to Getting data into R">Getting data into R</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2015-12-29T00:00:00+00:00">
                Published: Tue 29 December 2015
        </abbr>

<p>In <a href="/category/blog.html">blog</a>.</p>
<p>tags: <a href="/tag/r.html">[R</a> <a href="/tag/recipes.html">recipes</a> <a href="/tag/tutorial.html">tutorial]</a> </p>
</footer><!-- /.post-info -->                <hr>
<p>Try</p>
<ul>
<li><a href="https://github.com/hadley/readr/blob/master/README.md">readr</a></li>
<li><a href="http://www.rdocumentation.org/packages/data.table/functions/fread">fread</a></li>
<li><code>read.csv</code> in Base R but beware you need to specify <code>stringsAsFactors=FALSE</code> otherwise strings are imported in a way that you are unlikely to find helpful</li>
</ul>
                <a class="readmore" href="/getting-data-into-r.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>

            <li><article class="hentry">
                <header>
                    <h1><a href="/qq-plots-in-r.html" rel="bookmark"
                           title="Permalink to QQ plots in R">QQ plots in R</a></h1>
                </header>

                <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-11-25T00:00:00+00:00">
                Published: Tue 25 November 2014
        </abbr>

<p>In <a href="/category/blog.html">blog</a>.</p>
<p>tags: <a href="/tag/r.html">[R</a> <a href="/tag/code.html">code</a> <a href="/tag/tutorial.html">tutorial]</a> </p>
</footer><!-- /.post-info -->                <hr>
<p>I was trying to show some colleagues how to draw a <a href="http://en.wikipedia.org/wiki/Q%E2%80%93Q_plot">QQ-plot</a> in R today. I failed miserably, and so have just spent a bit of time trying to redeem myself.</p>
<p>This should do it.</p>
<div class="highlight"><pre><span></span><span class="c1"># Test data: 1000 patients with two different age distributions</span>
tdt <span class="o">&lt;-</span> data.table<span class="p">(</span>age.old<span class="o">=</span>rnorm â€¦</pre></div>
                <a class="readmore" href="/qq-plots-in-r.html">read more</a>
                </div><!-- /.entry-content -->
            </article></li>
                </ol><!-- /#posts-list -->
                </section><!-- /#content -->
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>