<!DOCTYPE html>
<html lang="en">
<head>
          <title>a little knowledge ...</title>
        <meta charset="utf-8" />


    <meta name="tags" content="[rstats" />
    <meta name="tags" content="books" />
    <meta name="tags" content="notes" />
    <meta name="tags" content="runningfile]" />

</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="/">a little knowledge ... <strong></strong></a></h1>
        </header><!-- /#banner -->
        <nav id="menu"><ul>
        </ul></nav><!-- /#menu -->
<section id="content" class="body">
  <header>
    <h2 class="entry-title">
      <a href="/advanced-r-book-notes.html" rel="bookmark"
         title="Permalink to advanced r book notes">advanced r book notes</a></h2>
 
  </header>
  <footer class="post-info">
    <time class="published" datetime="2016-01-26T00:00:00+01:00">
      Tue 26 January 2016
    </time>
    <address class="vcard author">
      By           <a class="url fn" href="/author/steve-harris.html">Steve Harris</a>
    </address>
  </footer><!-- /.post-info -->
  <div class="entry-content">
    <hr>
<p>A series of notes gleaned from reading Hadley Wickham's <a href="http://adv-r.had.co.nz">Advanced R</a>.<sup id="fnref-1"><a class="footnote-ref" href="#fn-1">1</a></sup> For now, I have created sections based around each chapter. I suspect that will rapidly make this page very cumbersome, but it seems like a good place to start.</p>
<h2>Unsorted general tips</h2>
<ul>
<li>read the source code of functions that you use often to learn a little about programming style</li>
</ul>
<h2>Data structures</h2>
<p>Useful functions for exploring</p>
<ul>
<li><code>typeof()</code>: what is it</li>
<li><code>length()</code>: how many elements within it</li>
<li><code>attributes()</code>: does it have any meta-data associated with it</li>
</ul>
<p>4 common types of atomic vectors</p>
<ul>
<li>logical</li>
<li>integer</li>
<li>double (aka numeric)</li>
<li>character</li>
</ul>
<p>So <code>is.logical()</code> etc. confirms the type of an object.</p>
<p>Coercion means that if you <code>c()</code> (combine) different data types then instead of throwing an error, the most flexible type will be used (e.g. c(1, 'one') will become ['1', 'one']).</p>
<p><code>list()</code> is similar to <code>c()</code> (combine) but combines things of different types without coercion or loss of information.</p>
<h3>Attributes</h3>
<p>Think of these as a list of key:pair values assigned to another object. You can create attributes, but the core attributes that always exist are</p>
<ul>
<li>names: <code>names()</code></li>
<li>dimensions: <code>dim()</code></li>
<li>class: <code>class()</code></li>
</ul>
<p>More generally <code>attributes()</code> gets the list of attributes or <code>attr(object, attribute_name)</code> gets one specific attribute. </p>
<p>Factors are a integers with a class 'factor', and a 'levels' attribute that defines their legal values.</p>
<h2>Subsetting</h2>
<p>Subsetting simply means extracting specific bits of an object: for example, a column of data from a dataframe.</p>
<h3>The <code>[</code> subsetting operator</h3>
<ul>
<li>a positive integer extacts objects from that position where '1' is the first place (not '0' as in languages such as Python)</li>
<li>a negative integer returns everything <em>except</em> the position</li>
<li>note that you cannot combine negative and positive numbers</li>
<li>a logical vector returns those elements where the corresponding value is <code>TRUE</code>. This allows you to write 'tests' to extract items according to rules. The recycling rule means that if the 'test' is shorter than the object it will be recycled repeatedly until the end of the object (e.g. <code>c(TRUE, FALSE)</code> will extract every other element.</li>
<li>if the vector is named then you can extract elements matching the names</li>
</ul>
<h3>Other subsetting operators</h3>
<ul>
<li><code>[[</code> is needed with lists since it returns the <em>contents</em> of the list at that position rather than a subset of the list (i.e. another list)</li>
<li><code>$</code> is a shorthand for <code>[[</code> that doesn't require a perfect character match</li>
</ul>
<p>To see these differences, try ...</p>
<div class="highlight"><pre><span></span>mtcars[&quot;cyl&quot;]
mtcars[[&quot;cyl&quot;]]
mtcars$cy
</pre></div>


<h3>Understand simplifying vs. preserving</h3>
<p>Beware that some subsetting operations try and return the <em>simplest</em> object needed to represent the subset (and therefore changes the structure of the object). Simplifying will remove names, unused levels of a factor, dimensions of matrices (that have length 1) etc. </p>
<p>As a rule of thumb <code>[[</code> (and therefore <code>$</code>) simplifies whereas <code>[</code> preserves.<sup id="fnref-2"><a class="footnote-ref" href="#fn-2">2</a></sup></p>
<blockquote>
<p>Subsetting with nothing can be useful in conjunction with assignment because it will preserve the original object class and structure. Compare the following two expressions. In the first, mtcars will remain as a data frame. In the second, mtcars will become a list.</p>
</blockquote>
<div class="highlight"><pre><span></span>mtcars<span class="p">[]</span> <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span>mtcars<span class="p">,</span> <span class="kp">as.integer</span><span class="p">)</span>
mtcars <span class="o">&lt;-</span> <span class="kp">lapply</span><span class="p">(</span>mtcars<span class="p">,</span> <span class="kp">as.integer</span><span class="p">)</span>
</pre></div>


<div class="footnote">
<hr>
<ol>
<li id="fn-1">
<p>A very cool website built using R markdown, pandoc and Jekyll. Note to self. Copy this!&#160;<a class="footnote-backref" href="#fnref-1" title="Jump back to footnote 1 in the text">&#8617;</a></p>
</li>
<li id="fn-2">
<p>There's a nice table in the book under the 'Simplifying vs. preserving subsetting' section <a href="http://adv-r.had.co.nz/Subsetting.html">here</a>&#160;<a class="footnote-backref" href="#fnref-2" title="Jump back to footnote 2 in the text">&#8617;</a></p>
</li>
</ol>
</div>
  </div><!-- /.entry-content -->
</section>
        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>,
                which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->
        </footer><!-- /#contentinfo -->
</body>
</html>